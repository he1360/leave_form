<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>فرم درخواست مرخصی</title>
  <link rel="preconnect" href="https://fonts.vazirmatn.ir">
  <link href="https://fonts.vazirmatn.ir/css/Vazirmatn-font-face.css" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Vazirmatn', Tahoma, sans-serif; background: #f5f7fa; padding: 15px; line-height: 1.6; }
    .container { max-width: 600px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 25px; position: relative; }
    .logo { position: absolute; top: 25px; right: 25px; width: 90px; height: auto; border-radius: 6px; z-index: 2; }
    .form-title { text-align: center; font-size: 18px; color: #2c3e50; margin-bottom: 10px; font-weight: bold; }
    .form-subtitle { text-align: center; font-size: 18px; color: #2c3e50; margin-bottom: 25px; font-weight: bold; }
    .instructions { text-align: center; background: #f8f9fa; padding: 14px; border-radius: 8px; margin-bottom: 25px; font-size: 14px; color: #555; line-height: 1.6; }
    @media (max-width: 600px) {
      .logo { width: 70px; top: 20px; right: 15px; }
      .form-title, .form-subtitle { font-size: 16px; }
      .instructions { font-size: 13px; }
    }
    label { display: block; margin: 18px 0 8px; font-weight: bold; color: #34495e; font-size: 15px; }
    input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; background: #fdfdfd; font-family: 'Vazirmatn', Tahoma, sans-serif; }
    @media (max-width: 768px) { input, select { font-size: 16px; } }
    button { width: 100%; padding: 14px; background: #27ae60; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; margin-top: 20px; cursor: pointer; transition: background 0.3s; font-family: 'Vazirmatn', Tahoma, sans-serif; }
    button:hover { background: #219653; }
    .result { margin-top: 20px; padding: 14px; border-radius: 8px; text-align: center; font-weight: bold; display: none; }
    .result.success { background: #d7f0e0; color: #1b7a4e; display: block; }
    .result.error { background: #fdeaea; color: #c0392b; display: block; }
    .required { color: #e74c3c; }
    .field-group { display: none; }
    .field-group.active { display: block; }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://i.ibb.co/qMwN3FDw/111.jpg" alt="لوگوی شرکت" class="logo">
    <div class="form-title">فرم درخواست مرخصی ویزیتورهای شرکت</div>
    <div class="form-subtitle">کیاپخش داریوش</div>
    <div class="instructions">
      کلیه ویزیتورهایی که محل ویزیت زمان ارسال درخواست آنها شهرستان می‌باشد می‌توانند از ساعت 7:30 لغایت 14 نسبت به ارسال درخواست مرخصی خود برای فردای کاری اقدام نمایند.<br>
      به کلیه درخواست‌هایی که مغایر با شرایط باشد ترتیب اثر داده نخواهد شد.
    </div>

    <form id="leaveForm">
      <label for="full_name">نام و نام خانوادگی <span class="required">*</span></label>
      <input type="text" id="full_name" name="full_name" required>

      <label for="sales_line">لاین فروش <span class="required">*</span></label>
      <select id="sales_line" name="sales_line" required>
        <option value="">لطفاً انتخاب کنید</option>
        <option value="درنا">درنا</option>
        <option value="سان استار">سان استار</option>
        <option value="زرین آیند">زرین آیند</option>
        <option value="پاکرخ">پاکرخ</option>
        <option value="عمومی">عمومی</option>
      </select>

      <label for="leave_type">نوع مرخصی <span class="required">*</span></label>
      <select id="leave_type" name="leave_type" required>
        <option value="">لطفاً انتخاب کنید</option>
        <option value="مرخصی استحقاقی">مرخصی استحقاقی</option>
        <option value="مرخصی ساعتی">مرخصی ساعتی</option>
      </select>

      <!-- فیلدهای مرخصی استحقاقی -->
      <div id="dailyFields" class="field-group active">
        <label for="start_date">تاریخ شروع مرخصی (شمسی) <span class="required">*</span></label>
        <input type="text" id="start_date" name="start_date" placeholder="1404/10/05" required>
        <label for="end_date">تاریخ پایان مرخصی (شمسی) <span class="required">*</span></label>
        <input type="text" id="end_date" name="end_date" placeholder="1404/10/10" required>
        <label for="duration_days">مدت مرخصی (روز) <span class="required">*</span></label>
        <input type="number" id="duration_days" name="duration_days" min="1" required>
      </div>

      <!-- فیلدهای مرخصی ساعتی -->
      <div id="hourlyFields" class="field-group">
        <label for="leave_date_hourly">تاریخ مرخصی ساعتی (شمسی) <span class="required">*</span></label>
        <input type="text" id="leave_date_hourly" name="leave_date_hourly" placeholder="1404/10/05" required>
        <label for="start_time">مرخصی از ساعت <span class="required">*</span></label>
        <input type="time" id="start_time" name="start_time" required>
        <label for="end_time">مرخصی تا ساعت <span class="required">*</span></label>
        <input type="time" id="end_time" name="end_time" required>
        <label for="duration_hours">مدت ساعت مرخصی <span class="required">*</span></label>
        <input type="number" id="duration_hours" name="duration_hours" min="0.5" step="0.5" required>
      </div>

      <label for="visit_city_request_day">شهر محل ویزیت روز درخواست مرخصی <span class="required">*</span></label>
      <select id="visit_city_request_day" name="visit_city_request_day" required>
        <option value="">لطفاً انتخاب کنید</option>
        <option value="کرمانشاه">کرمانشاه</option>
        <option value="اسلام‌آباد غرب">اسلام‌آباد غرب</option>
        <option value="پاوه">پاوه</option>
        <option value="ثلاث باباجانی">ثلاث باباجانی</option>
        <option value="جوانرود">جوانرود</option>
        <option value="روانسر">روانسر</option>
        <option value="سرپل ذهاب">سرپل ذهاب</option>
        <option value="سنقر">سنقر</option>
        <option value="صحنه">صحنه</option>
        <option value="قصر شیرین">قصر شیرین</option>
        <option value="کنگاور">کنگاور</option>
        <option value="گیلان‌غرب">گیلان‌غرب</option>
        <option value="هرسین">هرسین</option>
        <option value="فیروزآباد">فیروزآباد</option>
        <option value="شاهو">شاهو</option>
        <option value="کوزران">کوزران</option>
        <option value="نودشه">نودشه</option>
        <option value="ریجاب">ریجاب</option>
        <option value="کرند غرب">کرند غرب</option>
        <option value="سرمست">سرمست</option>
      </select>

      <label for="visit_city_leave_day">شهر محل ویزیت روز مرخصی <span class="required">*</span></label>
      <select id="visit_city_leave_day" name="visit_city_leave_day" required>
        <option value="">لطفاً انتخاب کنید</option>
        <!-- همان گزینه‌ها -->
        <option value="کرمانشاه">کرمانشاه</option>
        <option value="اسلام‌آباد غرب">اسلام‌آباد غرب</option>
        <option value="پاوه">پاوه</option>
        <option value="ثلاث باباجانی">ثلاث باباجانی</option>
        <option value="جوانرود">جوانرود</option>
        <option value="روانسر">روانسر</option>
        <option value="سرپل ذهاب">سرپل ذهاب</option>
        <option value="سنقر">سنقر</option>
        <option value="صحنه">صحنه</option>
        <option value="قصر شیرین">قصر شیرین</option>
        <option value="کنگاور">کنگاور</option>
        <option value="گیلان‌غرب">گیلان‌غرب</option>
        <option value="هرسین">هرسین</option>
        <option value="فیروزآباد">فیروزآباد</option>
        <option value="شاهو">شاهو</option>
        <option value="کوزران">کوزران</option>
        <option value="نودشه">نودشه</option>
        <option value="ریجاب">ریجاب</option>
        <option value="کرند غرب">کرند غرب</option>
        <option value="سرمست">سرمست</option>
      </select>

      <label for="telegram_id">آیدی تلگرام (اختیاری)</label>
      <input type="text" id="telegram_id" name="telegram_id" placeholder="مثال: 123456789">

      <button type="submit">ارسال درخواست</button>
    </form>

    <div id="result" class="result"></div>
  </div>

  <script>
    document.getElementById('leave_type').addEventListener('change', function() {
      const daily = document.getElementById('dailyFields');
      const hourly = document.getElementById('hourlyFields');
      if (this.value === 'مرخصی ساعتی') {
        daily.classList.remove('active');
        hourly.classList.add('active');
      } else if (this.value === 'مرخصی استحقاقی') {
        hourly.classList.remove('active');
        daily.classList.add('active');
      } else {
        daily.classList.remove('active');
        hourly.classList.remove('active');
      }
    });

    document.getElementById('leaveForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const url = 'https://analysis-2025.app.n8n.cloud/webhook/leave';
      const formData = new FormData(e.target);
      const resultDiv = document.getElementById('result');

      try {
        const response = await fetch(url, {
          method: 'POST',
          body: formData
        });
        if (response.ok) {
          resultDiv.className = 'result success';
          resultDiv.textContent = '✅ درخواست شما با موفقیت ارسال شد.';
          e.target.reset();
          document.getElementById('dailyFields').classList.add('active');
          document.getElementById('hourlyFields').classList.remove('active');
        } else {
          resultDiv.className = 'result error';
          resultDiv.textContent = '❌ خطا در ارسال. لطفاً دوباره تلاش کنید.';
        }
      } catch (err) {
        resultDiv.className = 'result error';
        resultDiv.textContent = '❌ ارتباط با سرور برقرار نشد.';
        console.error('Error:', err);
      }
    });
  </script>
</body>
</html>